## Телеграм-бот в обертке эирфлоу

### *MESG_FEED_YEST_REPORT.py*: 
  Телеграм-бот "I'm your friendly report bot" собирает полный отчёт по приложению - лента и сервис сообщений - и отправляет его указанному пользователю.

Внешний вид отчёта:
![report_text](https://user-images.githubusercontent.com/94457858/192874875-f34093ce-937f-427b-b10b-2ffead237d7f.png)
![report_feed_p1](https://user-images.githubusercontent.com/94457858/192874907-e25fef66-417d-4ef5-8f62-2732d4ad3266.jpg)
![report_feed_p2](https://user-images.githubusercontent.com/94457858/192874938-a3870bcc-6fcc-4df5-8501-a63e3473ffce.jpg)
![report_mesg](https://user-images.githubusercontent.com/94457858/192874968-bdf1e8b1-9e6b-4ef6-96f1-cef429efb85c.jpg)

### *send_alerts.py*: 
  Телеграм-бот с периодичностью каждые 15 минут проверяет ключевые метрики, такие как активные пользователи в ленте и мессенджере, просмотры, лайки, CTR, количество отправленных сообщений.  

Для проверки будем использовать статистический метод проверки *межквартильный рамах*. Метод не требует нормального распределения данных и удобен для поиска аномалий в realtime, т.к. не требует больших вычислений.

Методика - строим доверительный интервал, выход за границы которого будет говорить об аномальности наблюдения.  Границы интервала вычисляем с помощью квартилей:  

![image](https://user-images.githubusercontent.com/94457858/192974168-200e3444-fe06-47dd-9921-53130d3d58ea.png)
* q25n − 0.25 персентиль за период n (или же 1 квартиль)
* q75n − 0.75 персентиль за период n (или же 3 квартиль)
* IQRn = q75n - q25n - межквартильный размах за период n
* a − коэффициент, определяющий ширину интервала

Принимаеи n = 5 (т.е. считаем относительно окна = 5 предыдущих 15-минуток) и а = 3 и получаем на выходе такую картину в случае срабатывания алерта:
![dau_mesg](https://user-images.githubusercontent.com/94457858/193009174-582a0242-2411-4d71-ab71-2e4b80cb6f3f.jpg)
![views](https://user-images.githubusercontent.com/94457858/193009208-3e5677c4-fd9e-4d51-8dac-3ad72eeb5561.jpg)
Пример текста алёрта:
![image](https://user-images.githubusercontent.com/94457858/193010044-54f53730-8c23-49ea-b941-3dd577dd4c80.png)
Дашборд по ссылке лежит в формате изображения как файл *Current_DATA_in_image_for_alerts*
